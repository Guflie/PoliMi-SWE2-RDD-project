@startuml sd12_delete_activity
' Refer to UC15
hide footbox

participant "Mobile App" as app 
participant "Trip API Gateway" as tapi
participant "Activity History Service" as ahs
participant "Activity DBMS" as dba 

activate app

app -> tapi : frw_delete_act_req(actId)
activate tapi
tapi ->> ahs : delete_act_req(actId)
deactivate tapi
activate ahs
ahs -->> tapi : conf_form, actDelToken
deactivate ahs
activate tapi
tapi -->> app : conf_form, actDelToken
deactivate tapi
' --------------------------------
app -> tapi : frw_send_del_conf(actId, ascDelToken)
activate tapi
tapi ->> ahs : delete_act(actId, ascDelToken)
deactivate tapi
activate ahs
ahs ->> dba : query_del_act(actId)
deactivate ahs
activate dba
dba -> dba : delete_act(actId)
dba -->> ahs : done
deactivate dba
activate ahs
ahs -->> tapi : done
deactivate ahs
activate tapi
tapi -->> app
deactivate tapi

@enduml